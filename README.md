# Household App

スマホ入力＋PC集計ができる家計簿アプリ。
※ 本アプリは「PCをサーバーとして、スマホから家計入力する」個人利用向けアプリです。

## 概要

- スマホから支出を入力
- IndexedDBに一時保存
- PC上のFastAPIへ同期
- PostgreSQLに保存
- 期間指定で集計・カテゴリ別表示

## 主な機能

- 支出入力（スマホ）
- 未送信データのローカル保存（IndexedDB）
- オフライン対応（PWA）
- 同期処理
- QRコードによるAPI URL・APIキー自動設定
- APIキー認証（セキュリティ対策）
- 期間指定集計
- カテゴリ別集計
- 明細一覧表示
- 明細削除（論理削除）

## 技術構成

- **Frontend**: React + Vite + TypeScript
- **PWA**: vite-plugin-pwa（オフライン対応）
- **Backend**: FastAPI
- **DB**: PostgreSQL
- **Container**: Docker / docker-compose

## 使い方

### 日常的な使い方

1. スマホでフロントエンドにアクセス（PWAとしてホーム画面に追加可能）
2. 「入力」タブで支出を入力（オフライン可）
3. 「同期する」ボタンを押してPCのAPIに送信
4. 「集計」タブで期間を指定して集計・明細を確認

## ドキュメント

- **[セットアップガイド](docs/SETUP.md)**: 初回セットアップ手順、環境変数設定
- **[運用・保守ガイド](docs/OPERATIONS.md)**: コマンドリファレンス、バックアップ、デプロイメント
- **[アーキテクチャ](docs/architecture.md)**: システム設計、API仕様、データモデル
- **[クライアント開発](client/README.md)**: フロントエンド開発ガイド

## 注意点

- PCとスマホは同一ネットワーク（テザリング可）で接続する必要があります
- 初回はAPIのURLとAPIキーを設定してください（QRコード推奨）
- APIキー認証により、同一ネットワーク内でも不正アクセスを防止しています
- DBデータはローカル環境のため、定期的にバックアップを取ることを推奨します（`backup_db.ps1` を使用）
- PWAとしてホーム画面に追加すると、オフラインでも入力可能です
- 同期はオンライン時のみ実行可能です

## セキュリティ

- **APIキー認証**: すべてのAPIリクエストにAPIキーが必要です（`X-API-Key` ヘッダー）
- **CORS設定**: 許可されたオリジンのみアクセス可能

詳細は `docs/architecture.md` を参照してください。

## ライセンス・注意

- 本アプリは個人利用を想定しています
- APIキー認証により基本的なセキュリティ対策を実装していますが、HTTPS未対応です
- 外部公開や商用利用には追加対策（HTTPS、より強固な認証等）が必要です
